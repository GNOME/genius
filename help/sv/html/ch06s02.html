<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Slingor</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Handbok för Genius"><link rel="up" href="ch06.html" title="Kapitel 6. Programmering med GEL"><link rel="prev" href="ch06.html" title="Kapitel 6. Programmering med GEL"><link rel="next" href="ch06s03.html" title="Summor och produkter"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Slingor</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch06.html">Föregående</a> </td><th width="60%" align="center">Kapitel 6. Programmering med GEL</th><td width="20%" align="right"> <a accesskey="n" href="ch06s03.html">Nästa</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="genius-gel-loops"></a>Slingor</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="genius-gel-loops-while"></a>While-slingor</h3></div></div></div><p>Syntax: </p><pre class="programlisting">while &lt;expression1&gt; do &lt;expression2&gt;
until &lt;expression1&gt; do &lt;expression2&gt;
do &lt;expression2&gt; while &lt;expression1&gt;
do &lt;expression2&gt; until &lt;expression1&gt;</pre><p> Dessa är liknande som i andra språk. Eftersom det i GEL helt enkelt är ett uttryck som måste ha ett returvärde kommer dessa konstruktioner dock att helt enkelt returnera resultatet av den sista iterationen eller <code class="literal">NULL</code> om ingen iteration utfördes. I det booleska uttrycket översätts <code class="literal">=</code> till <code class="literal">==</code> precis som för <code class="literal">if</code>-satsen.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="genius-gel-loops-for"></a>For-slingor</h3></div></div></div><p>Syntax: </p><pre class="programlisting">for &lt;identifier&gt; = &lt;from&gt; to &lt;to&gt; do &lt;body&gt;
for &lt;identifier&gt; = &lt;from&gt; to &lt;to&gt; by &lt;increment&gt; do &lt;body&gt;</pre><p> Slinga med identifierare inställd till alla värden från <code class="literal">&lt;from&gt;</code> till <code class="literal">&lt;to&gt;</code>, valfritt med ett annat inkrement än 1. Dessa är snabbare, trevligare och mer kompakta än de vanliga slingorna som ovan, men mindre flexibla. Identifieraren måste vara en identifierare och kan inte vara en dereferering. Värdet på identifieraren är identifierarens sista värde, eller <code class="literal">&lt;from&gt;</code> om kroppen aldrig evaluerades. Variabeln är garanterad att vara initierad efter en slinga, så du kan använda den säkert. Vidare måste <code class="literal">&lt;from&gt;</code>, <code class="literal">&lt;to&gt;</code> och <code class="literal">&lt;increment&gt;</code> vara icke-komplexa tal. <code class="literal">&lt;to&gt;</code> är inte garanterad att träffas, men kommer aldrig att passeras, till exempel skriver följande ut udda tal från 1 till 19: </p><pre class="programlisting">for i = 1 to 20 by 2 do print(i)
</pre><p>Då ett av värdena är ett flyttal görs den sista kontrollen till inom 2^-20 av stegstorleken. Det vill säga även om vi passerar med 2^-20 gånger ”by”-värdet ovan kommer vi fortfarande att exekvera den sista iterationen. På detta sätt gör </p><pre class="programlisting">for x = 0 to 1 by 0.1 do print(x)
</pre><p> vad som förväntas även om addition av 0.1 tio gånger blir något mer än 1.0 på grund av hur flyttal lagras i bas 2 (det finns inget 0.1, det faktiska lagrade talet är något större). Detta är inte perfekt, men hanterar de flesta fallen. Använd faktiska rationella tal om du vill undvika att hantera detta problem, till exempel: </p><pre class="programlisting">for x = 0 to 1 by 1/10 do print(x)
</pre><p> Denna kontroll görs bara från version 1.0.16 och framåt, så exekvering av din kod kan skilja sig åt i äldre versioner.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="genius-gel-loops-foreach"></a>Foreach-slingor</h3></div></div></div><p>Syntax: </p><pre class="programlisting">for &lt;identifier&gt; in &lt;matrix&gt; do &lt;body&gt;</pre><p> För varje element i matrisen, från rad till rad från vänster till höger exekverar vi kroppen med identifieraren inställd till aktuellt element. För att skriva ut siffrorna 1,2,3 och 4 i denna ordning kan du göra: </p><pre class="programlisting">for n in [1,2:3,4] do print(n)
</pre><p> Om du vill gå genom raderna och kolumnerna i en matris kan du använda funktionerna RowsOf och ColumnsOf som returnerar en vektor av raderna eller kolumnerna i matrisen. Så </p><pre class="programlisting">for n in RowsOf ([1,2:3,4]) do print(n)
</pre><p> kommer skriva ut [1,2] och sedan [3,4].</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="genius-gel-loops-break-continue"></a>Break och Continue</h3></div></div></div><p>Du kan också använda kommandona <code class="literal">break</code> och <code class="literal">continue</code> i slingor. Fortsättningskommandot <code class="literal">continue</code> kommer att starta om den aktuella slingan i dess nästa iteration, medan kommandot <code class="literal">break</code> går ur den aktuella slingan. </p><pre class="programlisting">while(&lt;expression1&gt;) do (
  if(&lt;expression2&gt;) break
  else if(&lt;expression3&gt;) continue;
  &lt;expression4&gt;
)
</pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch06.html">Föregående</a> </td><td width="20%" align="center"><a accesskey="u" href="ch06.html">Upp</a></td><td width="40%" align="right"> <a accesskey="n" href="ch06s03.html">Nästa</a></td></tr><tr><td width="40%" align="left" valign="top">Kapitel 6. Programmering med GEL </td><td width="20%" align="center"><a accesskey="h" href="index.html">Hem</a></td><td width="40%" align="right" valign="top"> Summor och produkter</td></tr></table></div></body></html>
