<html><head><meta charset="UTF-8"><title>Referenser</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="Handbok för Genius"><link rel="up" href="ch06.html" title="Chapter 6. Programmering med GEL"><link rel="prev" href="ch06s07.html" title="Returnera"><link rel="next" href="ch06s09.html" title="Vvärden"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Referenser</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch06s07.html">Prev</a> </td><th width="60%" align="center">Chapter 6. Programmering med GEL</th><td width="20%" align="right"> <a accesskey="n" href="ch06s09.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="genius-gel-references"></a>Referenser</h2></div></div></div><p>Det kan vara nödvändigt för vissa funktioner att returnera mer än ett värde. Detta kan åstadkommas genom att returnera en vektor av värden, men många gånger är det bekvämt att skicka en referens till en variabel. Du skickar en referens till en variabel till en funktion, och funktionen kommer att ställa in variabeln åt dig med en dereferering. Du måste inte använda referenser bara för detta syfte, men det är deras huvudsakliga användning.</p><p>Då du använder funktioner som returnerar värden genom referenser i argumentlistan, skicka bara variabelnamnet med ett et-tecken. Till exempel kommer följande kod att beräkna ett egenvärde för en matris <code class="varname">A</code> med initial egenvektorgissning <code class="varname">x</code>, och lagra den beräknade egenvektorn i variabeln <code class="varname">v</code>: </p><pre class="programlisting">RayleighQuotientIteration (A,x,0.001,100,&amp;v)
</pre><p>Detaljerna kring hur referenser fungerar och syntaxen liknar språket C. Operatorn <code class="literal">&amp;</code> refererar en variabel och <code class="literal">*</code> derefererar en variabel. Båda kan endast tillämpas till en identifierare, så <code class="literal">**a</code> är inte ett giltigt uttryck i GEL.</p><p>Referenser förklaras bäst med ett exempel: </p><pre class="programlisting">a=1;
b=&amp;a;
*b=2;
</pre><p> nu innehåller <code class="varname">a</code> 2. Du kan också referera till funktioner: </p><pre class="programlisting">function f(x) = x+1;
t=&amp;f;
*t(3)
</pre><p> ger oss 4.</p><p lang="en">The first time a variable is referenced, it is created in the current
      context unless it exists.  So if we make a function that sets the variable to 2,
      such as
      <strong class="userinput"><code>function f(k) = (*k=2)</code></strong>, then the
      call 
      <strong class="userinput"><code>f(&amp;n)</code></strong> will declare a new variable <code class="varname">n</code>
      then the function
      <code class="function">f</code> will run and set it to 2.  So there is
      no need to write something like
      <strong class="userinput"><code>n=0;f(&amp;n)</code></strong>.  A new variable in the current
      context is created even if a
      variable exists in a higher context, such as in the global context.
      So for example after
      </p><pre lang="en" class="programlisting">n=3;
function f(k) = (*k=2);
function g() = (f(&amp;n);print(n));
g();
</pre><p lang="en">
      the variable <code class="varname">n</code> is still 3 and not 2.  That is because inside
      <code class="function">g</code>, when <code class="varname">n</code> is referenced, it is a new
      variable in the context of <code class="function">g</code>.  The function
      <code class="function">f</code> then sets this <code class="varname">n</code> to 2,
      and then 2 is printed, but the <code class="varname">n</code> in the global context
      is not touched.  So we can use references to get values out of functions and
      we do not need to explicitly declare them, nor do we have to worry about messing up
      global variables that the user might be using for something else.
      </p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch06s07.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch06.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch06s09.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Returnera </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Vvärden</td></tr></table></div></body></html>
